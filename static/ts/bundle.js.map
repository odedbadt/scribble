{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://scrib/./src/ts/circle.ts","webpack://scrib/./src/ts/clearall.ts","webpack://scrib/./src/ts/click_and_drag_tool.ts","webpack://scrib/./src/ts/click_tool.ts","webpack://scrib/./src/ts/color_stack.ts","webpack://scrib/./src/ts/cursor_size.ts","webpack://scrib/./src/ts/dropper.ts","webpack://scrib/./src/ts/editing_tool.ts","webpack://scrib/./src/ts/editor.ts","webpack://scrib/./src/ts/eraser.ts","webpack://scrib/./src/ts/floodfill.ts","webpack://scrib/./src/ts/gdrive.ts","webpack://scrib/./src/ts/line.ts","webpack://scrib/./src/ts/mandala.ts","webpack://scrib/./src/ts/on_select_tool.ts","webpack://scrib/./src/ts/palette.ts","webpack://scrib/./src/ts/rect.ts","webpack://scrib/./src/ts/scribble.ts","webpack://scrib/./src/ts/styletogglers.ts","webpack://scrib/./src/ts/undo_redo_buffer.ts","webpack://scrib/./src/ts/utils.ts","webpack://scrib/webpack/bootstrap","webpack://scrib/webpack/runtime/define property getters","webpack://scrib/webpack/runtime/hasOwnProperty shorthand","webpack://scrib/webpack/runtime/make namespace object","webpack://scrib/./src/ts/main_app.ts"],"sourcesContent":["import { Editor } from \"./editor\"\nimport { ClickAndDragTool } from \"./click_and_drag_tool\"\nimport { Vector2 } from \"./types\";\nexport class CircleTool  extends ClickAndDragTool {\n    constructor(context:CanvasRenderingContext2D, editor:Editor) {\n        super(context, editor, false);\n    }\n    editing_action(at:Vector2) {\n        if (this.from == null) {\n            return false;\n        }\n        const r = Math.sqrt((at.x - this.from.x)*(at.x - this.from.x)+\n        (at.y - this.from.y)*(at.y - this.from.y))\n        this.context.ellipse(\n                this.from.x,this.from.y,r,r,0,0,Math.PI*2);\n        if (this.app.settings.filled) {\n            this.context.fill();\n        } else {\n            this.context.stroke();\n        }\n        return true;\n\n    }\n}\n\n","import { Editor } from \"./editor\";\nimport { OnSelectTool } from \"./on_select_tool\"\nimport { Vector2 } from \"./types\";\n\nexport class ClearAllTool extends OnSelectTool {\n    start(at: Vector2, buttons:number):boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    action(at: Vector2): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    stop(at: Vector2):boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    constructor(context:CanvasRenderingContext2D, editor:Editor) {\n        super(context, editor)\n        this.context = context;\n        this.editor = editor;\n        this.app = editor.app;\n    }\n    select_action() {\n        const w = this.context.canvas.clientWidth;\n        const h = this.context.canvas.clientHeight;\n        this.context.fillStyle = this.app.settings.back_color;\n        this.context.fillRect(0, 0, w, h);\n    }\n    hover():boolean {\n        return false\n    }    \n}\n","import {EditingTool} from \"./editing_tool\"\nimport { Editor } from \"./editor\";\nimport { MainApp } from \"./main_app\";\nimport { Vector2, unit_rect } from \"./types\";\nimport { override_canvas_context } from \"./utils\";\n\nexport abstract class ClickAndDragTool extends EditingTool {\n    is_incremental: boolean;\n    dirty: boolean;\n    from: Vector2 | null;\n    tmp_context: CanvasRenderingContext2D | undefined;\n    constructor(context: CanvasRenderingContext2D, editor: Editor, incremental: boolean |  null, tmp_context?: CanvasRenderingContext2D) {\n        super(context, editor, tmp_context);\n        this.is_incremental = !!incremental;\n        this.start = this.start.bind(this);\n        this.action = this.action.bind(this);\n        this.stop = this.stop.bind(this);\n        this.dirty = false;\n        this.from = null;\n    }\n    select(): void {\n    }\n    start(at: Vector2, buttons:number):boolean {\n        this.context.clearRect(0, 0, this.w, this.h);\n        this.context.fillStyle = this.app.settings.fore_color;\n        this.context.strokeStyle = this.app.settings.fore_color;\n        this.context.lineWidth = this.app.settings.line_width;\n        this.context.lineCap = 'round';\n        this.dirty = this.editing_start();\n        this.from = at;\n        return false\n    }\n    editing_start() {\n        // nop, implemenet me\n        return false;\n    }\n    action(at: Vector2):boolean {\n        this.editor.art_to_staging()\n        this.editor.app.tool_context.beginPath();\n        this.dirty = !!this.editing_action(at) || this.dirty;\n        if (!this.is_incremental) {\n            this.editor.staging_to_art()\n        }\n        this.editor.art_to_staging()\n        this.editor.tool_to_staging()\n        this.editor.staging_to_view()\n        this.editor.tmp_tool_to_view()\n        if (!this.is_incremental) {\n            this.context.clearRect(0, 0, this.w, this.h);\n        }\n        return true\n    }\n    hover(at: any):boolean {\n        if (!this.tmp_context) {\n            return false;\n        }\n        this.tmp_context.clearRect(0, 0, this.w, this.h);\n        const dirty = this.hover_action(at);\n        if (dirty) {\n            this.editor.tool_to_view()\n            return true;\n        }\n        return false;\n    }\n    hover_action(at: any) {\n        // nop\n        return false;\n    }\n    editing_action(at: Vector2):boolean {\n        throw new Error(\"Not fully implemented tool\");\n    }\n    stop(at:Vector2):boolean {\n        this.dirty = !!this.editing_stop(at) || this.dirty;\n        if (this.dirty) {\n            this.editor.staging_to_art()\n            this.editor.undo_redo_buffer.push(this.app.art_context.getImageData(0, 0, this.w, this.h));\n            this.from = null;\n            this.editor.art_to_staging()\n            this.editor.tool_to_staging()\n            this.editor.staging_to_view()\n            this.dirty = false;\n            return true\n        }\n        return false\n    }\n    editing_stop(at:Vector2):boolean {\n        // nop, implemenet me\n        return false\n    }\n}\n","import { EditingTool } from \"./editing_tool\"\nimport { Editor } from \"./editor\";\nimport { Vector2, unit_rect } from \"./types\";\n\nexport abstract class ClickTool extends EditingTool {\n    constructor(context:CanvasRenderingContext2D, editor:Editor) {\n            super(context, editor);\n            this.start = this.start.bind(this);\n        }\n    select() {\n    }\n    start(at:Vector2, buttons:number):boolean {\n        this.context.clearRect(0,0,this.w,this.h);\n        this.editor.art_to_staging()\n        this.editing_start(at, buttons);\n        this.editor.tool_to_staging()\n        this.editor.staging_to_view()\n        this.editor.staging_to_art()\n        this.editor.undo_redo_buffer.push(this.app.art_context.getImageData(0,0,this.w,this.h))\n        this.editor.art_to_staging()\n        this.editor.tool_to_staging()\n        this.editor.staging_to_view()\n        return true;\n    }\n    abstract editing_start(at:Vector2, buttons:number):boolean\n\n}\n","import { MainApp } from \"./main_app\";\nimport { dist2, dist2_to_set } from \"./utils\";\n\nexport class ColorStack {\n    _depth: number\n    _stack: Array<number[]>\n    _color_stack_items: HTMLCollectionOf<Element>;\n    _color_selector_div_fore: HTMLElement;\n    _color_selector_div_back: HTMLElement;\n    _pairwise_threshold: number;\n    color_depth: any;\n    settings: any;\n    view_context: any;\n    private _app: MainApp;\n    private _adjacent_threshold: number;\n    constructor(\n        app:MainApp, \n        depth:number, \n        pairwise_threshold:number,\n        adjacent_threshold:number,\n        color_selector_div_fore:HTMLElement,\n        color_selector_div_back:HTMLElement,\n        color_stack_items:HTMLCollectionOf<Element>) {\n        this._app = app\n        this._depth = depth\n        this._pairwise_threshold = pairwise_threshold\n        this._adjacent_threshold = adjacent_threshold\n        \n        this._stack = new Array<number[]>()\n        this._color_stack_items = color_stack_items;\n        this._color_selector_div_fore = color_selector_div_fore\n        this._color_selector_div_back = color_selector_div_back\n\n    }\n    refresh_color_stack() {\n        const slots = this._color_stack_items;\n        const l = this._stack.length;\n        const _this = this;\n        for (let j = 0; j < slots.length; ++j) {\n            const slot:HTMLElement = slots[j] as HTMLElement\n            if (j < l) {\n                const color = this._stack.at(l-1-j)\n                if (color == undefined) {\n                    continue;\n                }\n                const color_string = `rgba(${color[0]},${color[1]},${color[2]},255)`;\n                slot.style.backgroundColor = color_string;\n                slot.addEventListener('click', (event) => {\n                    _this.select_color(color, event.button ==  0, false)\n                })\n            }\n        }\n    }\n\n    select_color(color:number[], is_fore:boolean, update_stack?:boolean) {\n        if (update_stack) {\n            if (this._stack.length == 0 ||\n                dist2_to_set(color, this._stack) >this._pairwise_threshold &&\n                dist2(color,this._stack[this._stack.length-1]) > this._adjacent_threshold) {\n                this._stack.push(color);\n                if (this._stack.length > this._depth) {\n                    this._stack.shift();\n                }\n            } else if (this._stack.length > 0) {\n                console.log(color, this._stack[this._stack.length-1], dist2(color,this._stack[this._stack.length-1]),dist2_to_set(color, this._stack))\n\n            }\n            this.refresh_color_stack()\n        }\n        const color_string = `rgba(${color[0]},${color[1]},${color[2]},255)`;\n        if (is_fore) {\n            this._app.settings.fore_color = color_string;\n            this._app.view_context.strokeStyle = color_string;\n            this._color_selector_div_fore.style.backgroundColor = color_string\n        } else  {\n            this._app.settings.back_color = color_string;\n            this._color_selector_div_back.style.backgroundColor = color_string\n        }\n    }\n\n}","import { ClickAndDragTool } from \"./click_and_drag_tool\"\nimport { Editor } from \"./editor\";\nimport { Vector2, unit_rect } from \"./types\";\nexport class CursorSize  extends ClickAndDragTool {\n    constructor(context:CanvasRenderingContext2D, editor:Editor,\n        tmp_context:CanvasRenderingContext2D) {\n        super(context, editor, false, tmp_context);\n    }\n    editing_start():boolean {\n        if (!this.tmp_context) {\n            return false;\n        }\n        this.tmp_context.fillStyle = this.app.settings.fore_color;\n        this.tmp_context.strokeStyle = this.app.settings.fore_color;\n        this.tmp_context.lineWidth = this.app.settings.line_width;\n        this.tmp_context.lineCap = 'round';\n        return false;\n    }\n    start(at:Vector2, buttons:number):boolean {\n        this.app.settings.line_width = 0.5;\n        super.start(at, buttons)\n        return false\n    }\n    editing_action(at:Vector2) {\n        if (this.from == null) {\n            return false;\n        }\n        if (!this.tmp_context) {\n            return false;\n        }\n        this.app.tool_tmp_context.clearRect(0,0,this.w,this.h);\n        this.editor.art_to_staging()\n        this.editor.staging_to_view()\n\n        const r = Math.sqrt((at.x - this.from.x)*(at.x - this.from.x)+\n        (at.y - this.from.y)*(at.y - this.from.y))\n        this.tmp_context.beginPath();\n        this.tmp_context.ellipse(\n                this.from.x,this.from.y,r,r,0,0,Math.PI*2);\n        this.tmp_context.fill();\n        this.app.settings.line_width = 2*r;\n        this.editor.tmp_tool_to_view()\n\n        return false;\n    }\n    hover(at:Vector2):boolean{\n        return false\n    }\n    editing_stop(at:Vector2):boolean {\n        if (this.editor.previous_tool_name) {\n            this.app.select_tool(this.editor.previous_tool_name)\n        }\n        return false;\n    }\n}","import { ClickTool } from  \"./click_tool\"\nimport { Editor } from \"./editor\";\nimport { Vector2 } from \"./types\";\n\nexport class Dropper extends ClickTool{\n    action(at: Vector2): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    stop(at: Vector2): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    constructor(context:CanvasRenderingContext2D, editor:Editor) {\n        super(context, editor);\n        }\n    editing_start(at:Vector2, buttons:number):boolean {\n\n        const color = this.app.art_context.getImageData(at.x,at.y,1,1).data;\n        const sampled_color = `rgba(${color[0]},${color[1]},${color[2]},255)`;\n        this.app.color_stack.select_color(color, !!(buttons & 1), true)\n        if (this.editor.previous_tool_name) {\n            this.app.select_tool(this.editor.previous_tool_name)\n        }\n        return false\n    }\n    hover(at:Vector2):boolean {\n        return false\n    }    \n}\n","import { Editor } from \"./editor\"\nimport { MainApp } from \"./main_app\";\nimport { Vector2 } from \"./types\";\n\nexport abstract class EditingTool {\n    context: CanvasRenderingContext2D;\n    editor: Editor;\n    w: number;\n    h: number;\n    app: MainApp;\n    tmp_context: CanvasRenderingContext2D | undefined;\n    constructor(context:CanvasRenderingContext2D, \n        editor:Editor, \n        tmp_context?:CanvasRenderingContext2D,\n        ) {\n        this.context = context;\n        this.editor = editor;\n        this.w = context.canvas.clientWidth;\n        this.h = context.canvas.clientHeight;\n        this.app = editor.app;\n        this.tmp_context = tmp_context;\n    }\n    select() {\n        this.context.clearRect(0, 0, this.w, this.h);\n    }\n    abstract start(at:Vector2, buttons:number):boolean;\n    abstract action(at:Vector2):boolean;\n    abstract stop(at:Vector2):boolean;\n    abstract hover(at:Vector2):boolean;\n\n}\nexport class NopTool extends EditingTool {\n    constructor(context:CanvasRenderingContext2D, editor:Editor, tmp_context?:CanvasRenderingContext2D) {\n        super(context, editor, tmp_context);\n    }\n    select() {\n        super.select();\n    }\n    start(at:Vector2, buttons:number):boolean {\n        return false\n    }\n    action(at:Vector2):boolean {\n        return false\n    }\n    stop(at:Vector2):boolean {\n        return false\n    }\n    hover(at:Vector2):boolean {\n        return false\n    }\n\n\n}\n","import { UndoRedoBuffer } from \"./undo_redo_buffer\"\nimport { EditingTool, NopTool } from './editing_tool'\nimport { MainApp } from \"./main_app\";\nimport { ScribbleTool } from \"./scribble\";\nimport { CircleTool } from \"./circle\";\nimport { ClearAllTool } from \"./clearall\";\nimport { Dropper } from \"./dropper\";\nimport { EraserTool } from \"./eraser\";\nimport { Floodfill } from \"./floodfill\";\nimport { LineTool } from \"./line\";\nimport { RectTool } from \"./rect\";\nimport { override_canvas_context } from \"./utils\";\nimport { CursorSize } from './cursor_size'\nimport { FillStyleToggler } from './styletogglers'\nimport { mandala } from \"./mandala\";\nimport { unit_rect, Vector2, Rect } from \"./types\"\nconst v:new (...args:any[])=>EditingTool = ScribbleTool\n const tool_classes = new Map<string, new (...args:any[])=>EditingTool>\n ([\n     [\"scribble\", ScribbleTool]\n    ,[\"rect\",  RectTool]\n    ,[\"line\",  LineTool]\n    ,[\"circle\",  CircleTool]\n    ,[\"dropper\",  Dropper]\n    ,[\"floodfill\",  Floodfill]\n    ,[\"eraser\",  EraserTool]\n    ,[\"clearall\", ClearAllTool]\n    ,[\"cursor_size\", CursorSize]\n    ,[\"fillstyle\", FillStyleToggler]\n    ,[\"mandala\", mandala]\n ])\nexport class Editor {\n    app: MainApp;\n    undo_redo_buffer: UndoRedoBuffer<RenderingContext>;\n    tool: any;\n    previous_tool_name: any;\n    current_tool_name: any;\n    from: any;\n    private _last_hover_spot: Vector2 | null;\n    private _view_canvas_bounding_rect: Rect;\n    private _art_canvas_bounding_rect: Rect;\n    private _non_native_view_render_countdown = 10 \n    private _view_rendering_countdown_interval?: NodeJS.Timeout|undefined = undefined;\n    constructor(app: MainApp) {\n        this.app = app;\n        this._view_canvas_bounding_rect = {\n            x:0, y: 0, w: this.app.view_canvas.offsetWidth, h: this.app.view_canvas.offsetHeight\n        }\n        this._art_canvas_bounding_rect = {\n            x:0, y: 0, w: this.app.art_canvas.offsetWidth, h: this.app.art_canvas.offsetHeight\n        }\n        this.undo_redo_buffer = new UndoRedoBuffer(100);\n        this.tool = new NopTool(app.tool_context, this, app.tool_tmp_context);\n        this._last_hover_spot = null;\n    }\n    view_coords_to_art_coords(view_coords:Vector2):Vector2 {\n        return {\n            x: this.app.state.view_port.x +\n            view_coords.x  / \n            this._view_canvas_bounding_rect.w * this.app.state.view_port.w,\n            y: this.app.state.view_port.y +\n            view_coords.y  / \n            this._view_canvas_bounding_rect.h * this.app.state.view_port.h\n                }\n    }\n    view_port_px():Rect {\n        const top_left_px = this.view_coords_to_art_coords({\n            x:this._view_canvas_bounding_rect.x,\n            y:this._view_canvas_bounding_rect.y\n        })\n        return {\n            x: top_left_px.x,\n            y: top_left_px.y,\n            w: this.app.state.view_port.w,\n            h: this.app.state.view_port.h\n        }\n    }\n    staging_to_art() {\n        \n        override_canvas_context(this.app.art_context, this.app.staging_canvas,\n            this._art_canvas_bounding_rect, false, false, true)\n    }\n    staging_to_view() {\n        this._non_native_view_render_countdown = 10;\n        override_canvas_context(this.app.view_context, this.app.staging_canvas,\n            this.app.state.view_port, false, false, false)\n            if (this._view_rendering_countdown_interval==undefined) {\n                const _this = this;\n                this._view_rendering_countdown_interval = setInterval(() => {\n                    _this._non_native_view_render_countdown--;\n                    if (_this._non_native_view_render_countdown <=0) {\n                        _this._non_native_view_render_countdown = 10\n                        override_canvas_context(this.app.view_context, this.app.staging_canvas,\n                            this.app.state.view_port, false, true, false)\n                        window.clearInterval(this._view_rendering_countdown_interval)\n                        this._view_rendering_countdown_interval=undefined;\n                    }\n                }, 100)\n        }  \n    } \n    art_to_view() {\n        this._non_native_view_render_countdown = 10;\n        override_canvas_context(this.app.view_context, this.app.art_canvas,\n            this.app.state.view_port, false, false, false)        \n        if (this._view_rendering_countdown_interval==undefined) {\n            const _this = this;\n            this._view_rendering_countdown_interval = setInterval(() => {\n                _this._non_native_view_render_countdown--;\n                if (_this._non_native_view_render_countdown <=0) {\n                    _this._non_native_view_render_countdown = 10\n                    override_canvas_context(this.app.view_context, this.app.art_canvas,\n                        this.app.state.view_port, false, true, false)\n                        window.clearInterval(this._view_rendering_countdown_interval)\n                        this._view_rendering_countdown_interval=undefined;\n                }\n            }, 100)\n        }\n    }\n    art_to_staging() {\n        override_canvas_context(this.app.staging_context, this.app.art_canvas,\n            this._art_canvas_bounding_rect, false, false, true)\n    }\n    tool_to_staging() {        \n        override_canvas_context(this.app.staging_context, this.app.tool_canvas,\n            this._view_canvas_bounding_rect, true, true, true)\n    }\n    tool_to_view() {\n        override_canvas_context(this.app.view_context, this.app.tool_canvas,\n            this.app.state.view_port, false, false, false)\n    }\n    tmp_tool_to_staging() {\n        override_canvas_context(this.app.staging_context, this.app.tool_tmp_canvas,\n            this._art_canvas_bounding_rect, true, false, true)\n    }\n    tmp_tool_to_view() {\n        override_canvas_context(this.app.view_context, this.app.tool_tmp_canvas,\n            this.app.state.view_port, true, false, false)\n    }\n    select_tool(tool_name:string) {\n        this.previous_tool_name = this.current_tool_name;\n        this.current_tool_name = tool_name;\n        const tool_class = tool_classes.get(tool_name);\n        if (!tool_class) {\n            return;\n        }\n        this.tool = new tool_class(this.app.tool_context, this, this.app.tool_tmp_context);\n        this.tool.select();\n        if (this._last_hover_spot) {\n            this.tool.hover(this.view_coords_to_art_coords(this._last_hover_spot));\n            this.tmp_tool_to_view();\n        }\n    }\n    deselect_tool() {\n        this.tool = null;\n    }\n    pointerdown(event:MouseEvent) {\n        event.preventDefault();\n        this.art_to_staging();\n        this.tool.start(this.view_coords_to_art_coords({ x: event.offsetX, y: event.offsetY }), event.buttons);\n    }\n    pointermove(event:MouseEvent) {\n        this._last_hover_spot = { x: event.offsetX, y: event.offsetY }\n        if (event.buttons) {\n            this.tool.action(this.view_coords_to_art_coords({ x: event.offsetX, y: event.offsetY }));\n            this.tool.hover(this.view_coords_to_art_coords({ x: event.offsetX, y: event.offsetY }));\n            this.tmp_tool_to_view();\n        }\n        else {\n            this.tool.hover(this.view_coords_to_art_coords({ x: event.offsetX, y: event.offsetY }));\n            this.tmp_tool_to_view();\n        }\n        // Appply action\n       \n        this.staging_to_view()\n        this.tmp_tool_to_view();\n    }\n    undo() {\n        this.art_to_staging();\n        this.app.tool_context.clearRect(0, 0, this._art_canvas_bounding_rect.w, this._art_canvas_bounding_rect.h);\n        const undone_image_data = this.undo_redo_buffer.undo();\n        this.app.clear_art_canvas();\n        if (undone_image_data) {\n            this.app.art_context.putImageData(undone_image_data, 0, 0);\n        }\n        this.art_to_view();\n        this.art_to_staging();\n    }\n    redo() {\n        const redone_image_data = this.undo_redo_buffer.redo();\n        if (redone_image_data) {\n            this.app.staging_context.clearRect(0, 0, this._art_canvas_bounding_rect.w, this._art_canvas_bounding_rect.h);\n            this.app.tool_context.clearRect(0, 0, this._art_canvas_bounding_rect.w, this._art_canvas_bounding_rect.h);\n            this.app.clear_art_canvas();\n            this.app.art_context.putImageData(redone_image_data, 0, 0);\n            this.art_to_view();\n            this.art_to_staging();\n        }\n    }\n    keydown(event:KeyboardEvent) {\n        if (event.code == 'KeyU') {\n            this.undo();\n        }\n        if (event.code == 'KeyR') {\n            this.redo();\n        }\n    }\n    pointerup(event:MouseEvent) {\n        this.tool.hover(this.view_coords_to_art_coords({ x: event.offsetX, y: event.offsetY }));\n        this.tool.stop();\n    }\n    pointerin(event:MouseEvent) {\n        if (!!event.buttons) {\n        }\n        //this.pointerup(event);\n    }\n    pointerleave(event:MouseEvent) {\n        this.app.tool_tmp_context.clearRect(0, 0, this._art_canvas_bounding_rect.w, this._art_canvas_bounding_rect.h);\n        this.art_to_staging();\n        this.tool_to_staging();\n        this.staging_to_view();\n        this._last_hover_spot = null\n    }\n}\n","import { ClickAndDragTool } from \"./click_and_drag_tool\"\nimport { Editor } from \"./editor\";\nimport { Vector2 } from \"./types\";\nexport class EraserTool extends ClickAndDragTool{\n    private _recorded_to: any;\n    constructor(context:CanvasRenderingContext2D\n        , editor:Editor, tmp_context:CanvasRenderingContext2D) {\n        super(context, editor, true, tmp_context);\n        }\n    hover_action(at:Vector2):boolean {\n        if (!this.tmp_context) {\n            return false;\n        }\n\n        this.tmp_context.fillStyle = this.app.settings.back_color\n        this.tmp_context.strokeStyle = this.app.settings.fore_color\n\n        this.tmp_context.lineWidth = 1\n        this.tmp_context.beginPath();\n        const r = this.app.settings.line_width;\n        this.tmp_context.ellipse(\n            at.x,at.y,r,r,0,0,Math.PI*2);\n        this.tmp_context.fill()\n        this.tmp_context.stroke()\n        return true\n\n\n    }\n\n    editing_action(to:Vector2) {\n        if (this._recorded_to) {\n            this.context.strokeStyle = this.app.settings.back_color\n            this.context.lineWidth = this.app.settings.line_width * 2\n            this.context.moveTo(\n                this._recorded_to.x,this._recorded_to.y);\n            this.context.lineTo(\n                to.x,to.y);\n        }\n        this._recorded_to = to;\n        this.context.stroke();\n        return true\n\n    }\n    editing_start():boolean {\n        return false\n    }\n    editing_stop():boolean {\n        this._recorded_to = null;\n        return false\n    }\n}\n","import { ClickTool }from \"./click_tool\"\nimport { Editor } from \"./editor\";\nimport { Vector2 } from \"./types\";\nimport { parse_RGBA } from \"./utils\";\n\nfunction _equal_colors(c1:Uint8ClampedArray,c2:Uint8ClampedArray):boolean {\n    return c1[0] == c2[0] &&\n    c1[1] == c2[1] &&\n    c1[2] == c2[2]\n}\nfunction _floodfill(read_context:CanvasRenderingContext2D, write_context:CanvasRenderingContext2D,\n                    replaced_color:Uint8ClampedArray, tool_color:Uint8ClampedArray,\n                    x:number, y:number, w:number, h:number) {\n    const context_image_data = read_context.getImageData(0, 0, w, h)\n    const context_data =  context_image_data.data;\n    let safety = w*h*4;\n    let stack = [{x:Math.floor(x),y:Math.floor(y)}]\n    while (stack.length > 0 && safety-- > 0) {\n        const dot = stack.pop();\n        if (!dot) {\n            break\n        }\n        const x = dot.x;\n        const y = dot.y;\n        if (x < 0 ||\n            y < 0 ||\n            x > w ||\n            y >= h) {\n            continue\n        }\n        const offset = (w*y+x)*4;\n        const color_at_xy = context_data.slice(offset, offset+4);\n        if (!_equal_colors(replaced_color, color_at_xy)) {\n            continue;\n        }\n        context_data[offset + 0] = tool_color[0];\n        context_data[offset + 1] = tool_color[1];\n        context_data[offset + 2] = tool_color[2];\n        context_data[offset + 3] = 255;\n        stack.push({x:x+1,y:y})\n        stack.push({x:x-1,y:y})\n        stack.push({x:x,y:y-1})\n        stack.push({x:x,y:y+1})\n    }\n    write_context.putImageData(context_image_data, 0,0);\n}\nexport class Floodfill extends ClickTool {\n    action(at: Vector2): boolean {\n        return false;\n        throw new Error(\"Method not implemented.\");\n    }\n    stop(at: Vector2): boolean {\n        return false;\n        throw new Error(\"Method not implemented.\");\n    }\n    constructor(context:CanvasRenderingContext2D, editor:Editor) {\n        super(context, editor)\n        this.context = context;\n        this.editor = editor;\n        this.app = editor.app;\n    }\n    editing_start(at:Vector2) {\n        const replaced_color = this.app.art_context.getImageData(at.x,at.y,1,1).data;\n        const parsed_fore_color = parse_RGBA(this.app.settings.fore_color);\n        _floodfill(this.app.art_context, this.context, replaced_color, parsed_fore_color,at.x,at.y, this.w, this.h);\n        return true\n    }\n    hover(at:Vector2):boolean {\n        return false\n    }\n\n\n}\n","export class GoogleDrive {\n    static client_id: string = '983437923698-shfpf6udie0o0akgoa3caj7bdvonkhvo.apps.googleusercontent.com'\n    static client_secret: string = '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'\n    static api_key: string = 'AIzaSyB3EOx24XRRrxQ9N60WS2ljDAX6Q86MkVc'\n    static oauth2Endpoint: string = 'https://accounts.google.com/o/oauth2/v2/auth'\n    access_token: string | undefined;\n    // params:Map<string,string>;\n    constructor(hash_on_page_load: string) {\n        // this.params = this.parse_hash(hash_on_page_load);\n        // if (this.params.get('state') == 'open-picker') {\n        //     this.open_picker(console.log);\n        // }\n    }\n    // parse_hash(hash:string):Map<string,string> {\n    //     const fragments = hash.replace('#', '').split('&');\n    //     let params = new Map<string,string>();\n    //     fragments.forEach(function(fragment:string, index:number) {\n    //         const kv = fragment.split('=');\n    //         const k = kv[0]\n    //         const v = decodeURIComponent(kv[1]);\n    //         params.set(k, v);\n    //     });\n    //     return params        \n    // } \n    initiate_open_tab(token_callback: (token: string) => void) {\n        if (this.access_token != undefined) {\n            token_callback(this.access_token);\n            return\n        }\n        const bc = new BroadcastChannel(\"token\");\n        const _this = this;\n        bc.onmessage = (event) => {\n            console.log(event);\n            const mtch = event.data.match('access_token=([^&]+)(&|$)')\n            if (mtch != null) {\n                _this.access_token = mtch[1]!;\n                token_callback(mtch[1]);            \n            }\n          };\n        const popup = window.open(\"/login\", \"formPopup\", \"width=10,height=10\")!;\n        // HACK: \"setTimeout\" loop until the popup aquired the access_token\n    }\n    open_picker(img_selected_callack: (url: string) => void) {\n        const _this = this\n        function picker_callback(access_token: string, data: google.picker.PickerResponse) {\n            if (data.action === google.picker.Action.PICKED) {\n                const selectedFile: any = data.docs.find(\n                    file => file.mimeType === 'image/png');\n                if (selectedFile) {\n                    const url = `https://www.googleapis.com/drive/v3/files/${selectedFile.id}?alt=media`;\n                    console.log('Fetching image')\n                    fetch(url, {\n                        headers: {\n                            Authorization: `Bearer ${access_token}` // Access token from Google Drive API\n                        }\n                    }).then(response => {\n                        if (!response.ok) {\n                            throw new Error(`HTTP error! Status: ${response.status}`);\n                        }\n                        return response.blob();\n                    })\n                        .then(blob => {\n                            img_selected_callack(URL.createObjectURL(blob));\n                            // const image_element:HTMLImageElement = new Image();\n                            \n                            // image_element.src = imageUrl;\n\n                            // document.body.append(image_element);\n                        })\n                }\n            }\n\n        }\n        this.initiate_open_tab((access_token) => {\n            function create_picker() {\n                const picker_builder: google.picker.PickerBuilder = new (google.picker.PickerBuilder as any)();\n                const picker = picker_builder.addView(google.picker.ViewId.DOCS)\n                    .setOAuthToken(access_token)\n                    .setDeveloperKey(GoogleDrive.api_key)\n                    .setCallback((data: google.picker.PickerResponse) => picker_callback(access_token, data))\n                    .build();\n                picker.setVisible(true);\n            }\n            if (google.picker != undefined) {\n                create_picker()\n            } else {\n                gapi.load('picker', { 'callback': create_picker });\n            }\n\n        });\n    }\n\n\n}\n\n\n","import { ClickAndDragTool } from \"./click_and_drag_tool\"\nimport { Editor } from \"./editor\";\nimport { Vector2 } from \"./types\";\n\nexport class LineTool  extends ClickAndDragTool {\n    constructor(context:CanvasRenderingContext2D, editor:Editor) {\n        super(context, editor, false);\n    }\n    editing_action(at:Vector2) {\n        if (!this.from) {\n            return false;\n        }\n        this.context.moveTo(\n            this.from.x,this.from.y);\n        this.context.lineTo(\n            at.x,at.y);\n        this.context.stroke();\n        return true\n    }\n}\n","import {ClickAndDragTool} from './click_and_drag_tool'\nimport { Editor } from \"./editor\";\nimport { Vector2 } from './types';\nimport { parse_RGBA } from './utils';\n\nfunction rotate(v:Vector2, w:number, h:number, a:number, mirror?:boolean) {\n    const v2:Vector2 = {\n        'x':(mirror ? -1 : 1)*(v.x-(w/2)),\n        'y':v.y-(h/2)\n    } \n    const v3:Vector2 = {\n        'x':v2.x*Math.cos(a) - v2.y*Math.sin(a),\n        'y':v2.x*Math.sin(a) + v2.y*Math.cos(a)\n    }\n    const v4:Vector2 = {\n        'x':v3.x+(w/2),\n        'y':v3.y+(h/2)\n    }\n    return v4;\n}\nexport class mandala extends ClickAndDragTool {\n    private _recorded_to: any;\n    private _n: number;\n    private _angles: Array<number>;\n    constructor(context: CanvasRenderingContext2D,\n                editor: Editor,\n                tmp_context: CanvasRenderingContext2D) {\n        super(context, editor, true, tmp_context);\n        this._n = 8;\n        const angles = []; \n        for (let j = 0; j < this._n;++j) {\n            angles.push(Math.PI*2*(j/this._n));\n        }\n        this._angles = Array.from(angles);\n    }\n\n    hover_action(at: { x: any; y: any; }) {\n        if (!this.tmp_context) {\n            return false;\n        }\n        this.tmp_context.fillStyle = this.app.settings.fore_color;\n        const tmp_context = this.tmp_context!;\n        const _this = this;\n        this._angles.forEach((angle) => {\n            const rotated = rotate(at, _this.w, _this.h, angle);\n            tmp_context.beginPath();\n            const r = this.app.settings.line_width / 2;\n            tmp_context.ellipse(rotated.x, rotated.y, r, r, 0, 0, Math.PI * 2);\n            tmp_context.fill();\n        })\n        return true;\n    }\n    editing_action(to: { x: any; y: any; }) {\n        if (this._recorded_to) {\n            const _this = this;\n            Array.from([true, false]).forEach((mirror) => {\n            this._angles.forEach((angle) => {\n                const rotated_recorded = rotate(this._recorded_to, _this.w, _this.h, angle, mirror);\n                const rotated_to = rotate(to, _this.w, _this.h, angle, mirror);\n                _this.context.moveTo(rotated_recorded.x, rotated_recorded.y);\n                _this.context.lineTo(rotated_to.x, rotated_to.y);\n            });\n        })\n        }\n        this._recorded_to = to;\n        this.context.stroke();\n        return true;\n    }\n    editing_stop(at:Vector2):boolean {\n        this._recorded_to = null;\n        return true\n    }\n}\n","import {EditingTool } from \"./editing_tool\"\nimport { Editor } from \"./editor\";\n\nexport abstract class OnSelectTool extends EditingTool{\n    constructor(context:CanvasRenderingContext2D, editor:Editor, tmp_context?:CanvasRenderingContext2D) {\n            super(context, editor, tmp_context);\n            this.select = this.select.bind(this);\n        }\n    select() {\n        this.context.clearRect(0,0,this.w,this.h);\n        this.editor.art_to_staging()\n        this.select_action();\n        this.editor.tool_to_staging()\n        this.editor.staging_to_view()\n        this.editor.staging_to_art()\n        this.editor.undo_redo_buffer.push(this.app.art_context.getImageData(0,0,this.w,this.h))\n        this.editor.art_to_staging()\n        this.editor.tool_to_staging()\n        this.editor.staging_to_view()\n        if (this.editor.previous_tool_name) {\n            this.app.select_tool(this.editor.previous_tool_name)\n        }\n    }\n    abstract select_action():void\n    hover():boolean {\n        return false\n\n    }\n}\n","import { hsl_to_rgb, vec_diff } from \"./utils\";\n\nexport class Palette {\n    _hl_canvas: HTMLCanvasElement;\n    _hl_w: number;\n    _hl_h: number;\n    private _sat_canvas: HTMLCanvasElement;\n    _sat_w: number;\n    private _sat_h: number;\n    private _rgb_color: number[];\n    private _hsl_color: number[];\n    constructor(hl_canvas:HTMLCanvasElement, sat_canvas:HTMLCanvasElement, initial_color_hsl:number[]) {\n        this._hl_canvas = hl_canvas\n        this._hl_w = hl_canvas.width;\n        this._hl_h = hl_canvas.height;\n        this._sat_canvas = sat_canvas;\n        this._rgb_color = hsl_to_rgb(initial_color_hsl);\n        this._hsl_color = initial_color_hsl;\n        this._sat_w = sat_canvas.width;\n        this._sat_h = sat_canvas.height;\n    }\n    _plot_hl() {\n        const hl_context:CanvasRenderingContext2D = this._hl_canvas.getContext('2d', {willReadFrequently:true})!\n        const hl_image_data = hl_context.getImageData(0,0,this._hl_w, this._hl_h)\n        const hl_data = hl_image_data.data;\n        for (let y = 0; y < this._hl_h; ++y) {\n            for (let x = 0; x < this._hl_w; ++x) {\n                const hl = this._hl_canvas_xy_to_hl(x, y)\n                const h = hl[0];\n                const l = hl[1];\n                const hsl_val =  [h, this._hsl_color[1], l];\n                \n                const rgb_val = hsl_to_rgb(hsl_val);\n                if ((Math.abs(h - this._hsl_color[0]) <= 1/this._hl_w) || \n                    (Math.abs(l - this._hsl_color[2]) <= 1/this._hl_h)) {\n                    // negative color\n                        const negative = vec_diff([255,255,255], rgb_val);\n                        rgb_val[0] = negative[0];\n                        rgb_val[1] = negative[1];\n                        rgb_val[2] = negative[2];\n                    }\n                const offset = 4*(x + y * this._hl_w)\n                hl_data[offset] = rgb_val[0]\n                hl_data[offset + 1] = rgb_val[1]\n                hl_data[offset + 2] = rgb_val[2]\n                hl_data[offset + 3] = 255;\n            }\n        }\n        hl_context.putImageData(hl_image_data, 0, 0);\n\n\n    }\n    _plot_sat() {\n        const sat_context:CanvasRenderingContext2D = this._sat_canvas.getContext('2d', {willReadFrequently:true})!\n        const sat_image_data = sat_context.getImageData(0,0,this._sat_w, this._sat_h)\n        const sat_data = sat_image_data.data;\n        for (let y = 0; y < this._sat_h; ++y) {\n            for (let x = 0; x < this._sat_w; ++x) {\n                const sat = this._sat_canvas_to_sat(x, y);\n                const rgb_val = hsl_to_rgb([this._hsl_color[0], sat, this._hsl_color[2]]);\n                if (Math.abs(sat - this._hsl_color[1]) <= 0.01) {\n                    rgb_val[0] = 0;\n                    rgb_val[1] = 0;\n                    rgb_val[2] = 0;\n                }\n                const offset = 4*(x + y * this._sat_w);\n                sat_data[offset] = rgb_val[0];\n                sat_data[offset + 1] = rgb_val[1];\n                sat_data[offset + 2] = rgb_val[2];\n                sat_data[offset + 3] = 255;\n            }\n        }\n        sat_context.putImageData(sat_image_data, 0, 0);\n\n    }\n\n    plot() {\n        this._plot_hl();\n        this._plot_sat();\n    }\n    get_rgb_color_at(x:number, y:number):Uint8ClampedArray {\n        const context:CanvasRenderingContext2D = this._hl_canvas.getContext('2d')!\n        const data = context.getImageData(x,y,1,1).data;\n        return data;\n\n    }\n    get_rgb_color():number[] {\n        return this._rgb_color;\n    }\n    _hl_canvas_xy_to_hl(x:number, y:number):number[] {\n        const h = 2*((x / this._hl_w+2.5) % 1);\n        const l = Math.min(1.0, Math.max(0, 0.5 + (y / this._hl_h - 0.5) * 1.25));\n        return [h,l]\n    }\n    _sat_canvas_to_sat(x:number, y:number):number {\n        return y/this._sat_h\n    }\n    hl_click(x:number, y:number) {\n        const hl = this._hl_canvas_xy_to_hl(x, y)\n        this._hsl_color = [hl[0], this._hsl_color[1], hl[1]]\n        this._rgb_color = hsl_to_rgb(this._hsl_color);\n        this.plot()\n    }\n    sat_click(x:number, y:number) {\n        this._hsl_color = [this._hsl_color[0], this._sat_canvas_to_sat(x,y), this._hsl_color[2]]\n        this._rgb_color = hsl_to_rgb(this._hsl_color);\n        this.plot()\n    }\n\n}","import { ClickAndDragTool } from \"./click_and_drag_tool\"\nimport { Editor } from \"./editor\";\nimport { Vector2 } from \"./types\";\n\nexport class RectTool extends ClickAndDragTool {\n    constructor(context:CanvasRenderingContext2D, editor:Editor) {\n        super(context, editor, false);\n    }\n    editing_action(to:Vector2) {\n        if (!this.from) {\n            return false;\n        }\n\n        this.context.rect(\n                this.from.x,this.from.y,to.x - this.from.x, to.y - this.from.y);\n        if (this.app.settings.filled) {\n            this.context.fill();\n         } else {\n             this.context.stroke();\n         }\n        return true;\n    }\n}\n","import {ClickAndDragTool} from './click_and_drag_tool'\nimport { Editor } from \"./editor\";\nimport { Vector2 } from './types';\nimport { parse_RGBA } from './utils';\nexport class ScribbleTool extends ClickAndDragTool {\n    private _recorded_to: any;\n    constructor(context: CanvasRenderingContext2D,\n                editor: Editor,\n                tmp_context: CanvasRenderingContext2D) {\n        super(context, editor, true, tmp_context);\n    }\n\n    hover_action(at: { x: any; y: any; }) {\n        if (!this.tmp_context) {\n            return false;\n        }\n        this.tmp_context.fillStyle = this.app.settings.fore_color;\n        this.tmp_context.beginPath();\n        const r = this.app.settings.line_width / 2;\n        this.tmp_context.ellipse(at.x, at.y, r, r, 0, 0, Math.PI * 2);\n        this.tmp_context.fill();\n        return true;\n    }\n    editing_action(to: { x: any; y: any; }) {\n        if (this._recorded_to) {\n            this.context.moveTo(this._recorded_to.x, this._recorded_to.y);\n            this.context.lineTo(to.x, to.y);\n        }\n        this._recorded_to = to;\n        this.context.stroke();\n        return true;\n    }\n    editing_stop(at:Vector2):boolean {\n        this._recorded_to = null;\n        return true\n    }\n}\n","import { OnSelectTool } from \"./on_select_tool\"\nimport { Editor } from \"./editor\";\nimport { parse_RGBA } from \"./utils\";\nimport { Vector2 } from \"./types\";\n\nfunction _equal_colors(c1:Uint8ClampedArray,c2:Uint8ClampedArray):boolean {\n    return c1[0] == c2[0] &&\n    c1[1] == c2[1] &&\n    c1[2] == c2[2]\n}\n\nexport class FillStyleToggler extends OnSelectTool {\n    start(at: Vector2, buttons:number):boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    action(at: Vector2): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    stop(at: Vector2):boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    constructor(context:CanvasRenderingContext2D, editor:Editor) {\n        super(context, editor)\n        this.context = context;\n        this.editor = editor;\n        this.app = editor.app;\n    }\n    select_action() {\n        this.app.settings.filled = !this.app.settings.filled;\n        const styled_buttons = document.getElementsByClassName('fillable')\n        for (let j = 0; j < styled_buttons.length; ++j) {\n            styled_buttons[j].classList.toggle('filled')\n        }\n    }\n\n\n}\n","/*\nCOMPLETELY EMPTY STACK WITH LINE DRWN:\n\n\n-1|\n ^\n\nnext_index: INDEX: -1\nON SCREEN: A\nUNDO: NULL\nREDO: NULL\n\nONLY BLANK CANVAS:\n\nSECOND LINE DRAWN:\n\nA\n^\n\nnext_index: INDEX 0\nON SCREEN: B\nUNDO: -1\nREDO: NONE\nUNDO = next_index - 2\n\nBLANK CANVAS + FIRST LINE + SECOND LINE:\n\n0123\nXAB\n US^\n\nnext_index: INDEX 3\nON SCREEN: B (INDEX 2)\nUNDO: INDEX 1\nREDO: NONE\nUNDO = next_index - 2\n\nBLANK CANVAS + FIRST LINE + SECOND LINE + UNDO:\n\n0123\nXAB\nUS^\n\nnext_index: INDEX 2\nON SCREEN: A (INDEX 1)\nUNDO: INDEX 0\nREDO: INDEX 2\nUNDO = next_index - 2\nREDO = next_index\n\n01\nXA\n^R\n\nXAB\n ^|\n\n...\n...\nXABCDEF\n    U^|\n\nABCDEF\n  USR\n\n\n*/\nexport class UndoRedoBuffer<T> {\n    stack: T[];\n    next_index: number;\n    high_water_mark: number;\n    constructor(size:number, log_level?:number) {\n        this.stack = new Array(size);\n        this.next_index = 0;\n        this.high_water_mark = 0; // abuse of notation, h.w.m. of \"next\" actually\n        //, ${v.data[0]}, ${v.data[1]}, ${v.data[2]}`)\n\n    }\n    dump_to_canvas() {\n        // if (!this._log_level) {\n        //     return\n        // }\n        // const canvas = document.getElementById('dbg-canvas');\n        // const context = canvas.getContext('2d');\n        // context.fillStyle = 'rgb(128,128,128)';\n        // context.fillRect(0,0,800,80)\n\n        // for (let j = 0; j < this.high_water_mark; ++j) {\n        //     const v = this.stack[j];\n        //     if (v && v.data) {\n        //         context.putImageData(v, j*82,0)\n        //     } else if (v){\n        //         context.fillStyle = 'rgb(255,128,128)';\n        //         context.fillRect(j*82,0,80,80)\n        //     } else {\n        //         context.fillStyle = 'rgb(128,255,128)';\n        //         context.fillRect(j*82,0,80,80)\n        //     }\n        // }\n        // context.fillStyle = 'rgb(255,0,0)';\n        // context.fillRect(this.next_index*82+20,60,5,10)\n        // context.fillStyle = 'rgb(0,0,255)';\n        // context.fillRect(this.high_water_mark*82+20,70,5,10)\n    }\n    log(msg:string) {\n        console.log(msg)\n        // if (this._log_level) {\n        //     console.log(msg)\n        //     try {\n        //         document.getElementById('dbg').style.visibility = 50\n        //         document.getElementById('dbg').style.visibility = 'visible'\n        //         document.getElementById('dbg').innerHTML = msg\n        //     } catch {\n\n        //     }\n        // }\n    }\n    undo():T|null {\n        if (this.next_index <=1) {\n            if (this.next_index == 1) {\n                this.next_index--;\n            }\n            this.dump_to_canvas()\n            return null\n        }\n        const v = this.stack[this.next_index-2] || null;\n        this.next_index--;\n        this.dump_to_canvas()\n        return v;\n    }\n    redo():T |null{\n        if (this.next_index >= this.high_water_mark) {\n            this.dump_to_canvas()\n            return null\n        }\n        const v = this.stack[this.next_index] || null;\n        this.next_index++;\n        this.dump_to_canvas()\n        return v;\n    }\n    push(v:T) {\n        this.stack[this.next_index] = v;\n        this.next_index++;\n        if (this.next_index > this.high_water_mark) {\n            this.high_water_mark = this.next_index;\n        }\n        if (this.high_water_mark > this.stack.length) {\n            this.stack.length = this.stack.length*2;\n        }\n        this.dump_to_canvas()\n    }\n}","import { Rect, Vector2 } from \"./types\";\nexport function override_canvas_context(\n    context_to:CanvasRenderingContext2D, \n    canvas_from:HTMLCanvasElement,\n    view_port_from: Rect,\n    keep?:boolean | undefined,\n    avoid_native?:boolean,\n    force_same_view_port?:boolean | undefined) {\n        const before_f_t = performance.now();\n    // context_to.putImage(context_to_image_data,0,0);\n    const to_w = context_to.canvas.clientWidth;\n    const to_h = context_to.canvas.offsetHeight;    \n    const from_w = canvas_from.clientWidth;\n    const from_h = canvas_from.offsetHeight;    \n    const context_from = canvas_from.getContext('2d')!\n    const context_from_image_data = context_from.getImageData(0, 0, \n        canvas_from.clientWidth, canvas_from.clientHeight)\n    const context_from_data =  context_from_image_data.data;\n    const context_to_image_data = context_to.getImageData(0, 0, \n        context_to.canvas.clientWidth, context_to.canvas.clientHeight)\n    const context_to_data =  context_to_image_data.data;\n    function render_non_native() {\n        for (let y = 0; y < to_h; ++y) {\n            for (let x = 0; x < to_w; ++x) {\n                const offset = (to_w*y+x)*4;\n                const from_x = Math.round(x/to_w*view_port_from.w+view_port_from.x)\n                const from_y = Math.round(y/to_h*view_port_from.h+view_port_from.y)\n                const from_offset = force_same_view_port ? offset :\n                    (from_w*from_y+from_x)*4;\n                if (context_from_data[from_offset + 3] > 0) {\n                    context_to_data[offset + 0] = context_from_data[from_offset + 0];\n                    context_to_data[offset + 1] = context_from_data[from_offset + 1];\n                    context_to_data[offset + 2] = context_from_data[from_offset + 2];\n                    context_to_data[offset + 3] = 255;\n                }\n            }\n        }\n        context_to.putImageData(context_to_image_data,0,0);\n    }\n    function render_native() {\n        context_to.drawImage(\n            canvas_from, \n            view_port_from.x, \n            view_port_from.y, \n            view_port_from.w, \n            view_port_from.h,\n            0,\n            0,\n            context_to.canvas.clientWidth,\n            context_to.canvas.clientHeight\n        );\n\n    }\n    if (!keep) {\n        context_to.clearRect(0, 0, \n            context_to.canvas.clientWidth, \n            context_to.canvas.clientHeight);\n    }\n    if (force_same_view_port) {\n        context_to.drawImage(canvas_from,0,0)\n    } else if (avoid_native) {\n        render_non_native()\n    } else {\n        render_native();\n    }\n}\nexport function parse_RGBA(color:string | Uint8ClampedArray):Uint8ClampedArray\n{\n    if (color instanceof Uint8ClampedArray) {\n        return color\n    }\n    // Match the pattern for \"rgb(r, g, b)\"\n    let regex = /rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)/;\n    // Execute the regex on the input string\n    let result = regex.exec(color);\n    if (result) {\n        // Return the extracted r, g, b values as an array of numbers\n        let r = parseInt(result[1]);\n        let g = parseInt(result[2]);\n        let b = parseInt(result[3]);\n        let a = parseInt(result[4]);\n        return Uint8ClampedArray.from([r, g, b,a]);\n    } else {\n        throw new Error(\"Invalid rgb string format\");\n    }\n}\n\nexport function hsl_to_rgb(hsl:number[]):number[] {\n    let r, g, b;\n    const h = hsl[0];\n    const s = hsl[1];\n    const l = hsl[2];\n    if (s === 0) {\n        r = g = b = l; // achromatic\n    } else {\n        const hue2rgb = (p:number, q:number, t:number) => {\n            if (t < 0) t += 1;\n            if (t > 1) t -= 1;\n            if (t < 1 / 6) return p + (q - p) * 6 * t;\n            if (t < 1 / 2) return q;\n            if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n            return p;\n        };\n\n        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n}\nexport function vec_diff(v1:number[], v2:number[]):number[] {\n    if (!v1) {\n        return v2;\n    }\n    if (!v2) {\n        return v1;\n    }\n    let res = []\n    for (let j = 0; j < v1.length; ++j) {\n        res.push(v1[j] - v2[j])\n    }\n    return res\n}\nexport function norm2(v:number[]):number {\n    let res = 0\n    for (let j = 0; j < v.length; ++j) {\n        res = res+v[j]*v[j]\n    }\n    return res\n}\n\nexport function dist2(v1:number[], v2:number[]) {\n    return norm2(vec_diff(v1,v2));\n}\n\nexport function dist2_to_set(v:number[], set:number[][]):number {\n    let min_dist2 = -1; //dist2(v, set[0]);\n    let min_j = 0;\n    for (let j = 0; j < set.length; ++j) {\n        if (set[j] == undefined) {\n            continue\n        }\n        const dist2_j = dist2(v, set[j])\n        if (min_dist2 == -1 || dist2_j < min_dist2 ) {\n            min_dist2 = dist2_j;\n            min_j = j\n        }\n    }\n    if (min_dist2 == -1) {\n        debugger\n    }\n    return min_dist2\n}\n\nexport function scale_rect(r:Rect, scale:Vector2) {\n    return {x:r.x*scale.x, \n        y:r.y*scale.y,\n        w:r.w*scale.x,\n        h:r.h*scale.y}\n}\nexport function translate_rect(r:Rect, shift:Vector2) {\n    return {x:r.x+shift.x, \n        y:r.y+shift.y,\n        w:r.w,\n        h:r.h}\n}\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Editor } from \"./editor\"\nimport { Palette} from './palette'\nimport { ColorStack } from \"./color_stack\";\nimport { Rect } from \"./types\";\nimport { GoogleDrive } from \"./gdrive\"\nfunction click_for_a_second(id:string, callback:Function) {\n    const elem = document.getElementById(id);\n    if (elem) {\n        elem.addEventListener('click', () =>{\n            elem.classList.add('pressed')\n            callback()\n            window.setTimeout(() => {\n            elem.classList.remove('pressed')\n            },120)\n\n        })\n    }\n}\nexport class MainApp {\n    art_canvas: HTMLCanvasElement;\n    art_context: any;\n    view_canvas: HTMLCanvasElement;\n    view_context: any;\n    staging_canvas: HTMLCanvasElement;\n    staging_context: CanvasRenderingContext2D;\n    tool_canvas: HTMLCanvasElement;\n    tool_context: CanvasRenderingContext2D;\n    tool_tmp_canvas: HTMLCanvasElement;\n    tool_tmp_context: CanvasRenderingContext2D;\n    editor: Editor;\n    google_drive:GoogleDrive; \n    settings: {\n        filled: boolean; \n        fore_color: string; \n        back_color: string; \n        line_width: number; \n    };\n    state: {\n        view_port: Rect;\n    }\n    color_stack: ColorStack;\n    palette: Palette;\n    palette_hl_canvas: HTMLCanvasElement;\n    palette_sat_canvas: HTMLCanvasElement;\n    constructor() {\n        this.art_canvas = document.getElementById('art-canvas')! as HTMLCanvasElement;\n        this.art_context = this.art_canvas.getContext('2d', {willReadFrequently:true}) as CanvasRenderingContext2D;\n\n        this.view_canvas = document.getElementById('view-canvas')!  as HTMLCanvasElement;\n        this.view_context = this.view_canvas.getContext('2d', {willReadFrequently:true})  as CanvasRenderingContext2D;\n        this.staging_canvas = document.getElementById('staging-canvas')!  as HTMLCanvasElement;\n        this.staging_context = this.staging_canvas.getContext('2d',{willReadFrequently:true})! as CanvasRenderingContext2D;\n        this.tool_canvas = document.getElementById('tool-canvas')!  as HTMLCanvasElement;\n        this.tool_context = this.tool_canvas.getContext('2d', {willReadFrequently:true})! as CanvasRenderingContext2D;\n        this.tool_tmp_canvas = document.getElementById('tool-tmp-canvas')!  as HTMLCanvasElement;\n        this.tool_tmp_context = this.tool_tmp_canvas.getContext('2d', {willReadFrequently:true})! as CanvasRenderingContext2D;\n        this.palette_hl_canvas = document.getElementById('hl-selector-canvas')!  as HTMLCanvasElement\n        this.palette_sat_canvas = document.getElementById('sat-selector-canvas')!  as HTMLCanvasElement\n        this.palette = new Palette(this.palette_hl_canvas, this.palette_sat_canvas, [1,0.5,0.5])\n        this.editor = new Editor(this);\n        this.settings = {\n            fore_color: 'rgba(0,0,0,255)',\n            back_color: 'rgba(255,255,255,255)',\n            line_width: 10,\n            filled: true,\n        }\n        this.state = {\n            view_port: {\n                x: 0,\n                y: 0, \n                w: this.art_canvas.clientWidth, \n                h: this.art_canvas.clientHeight\n            }\n        }\n        this.art_context.imageSmoothingEnabled = false;\n        this.art_context.globalCompositeOperation = 'source-over';\n        this.staging_context.imageSmoothingEnabled = false;\n        this.staging_context.globalCompositeOperation = 'source-over';\n        this.tool_context.globalCompositeOperation = 'source-over';\n        this.tool_context.imageSmoothingEnabled = false;\n        this.color_stack = new ColorStack(this, 8, 100,10000,\n            document.getElementById('color-selector-div-fore')!,\n            document.getElementById('color-selector-div-back')!,\n            document.getElementsByClassName('color_stack_item')\n            )\n        this.google_drive = new GoogleDrive(document.location.hash)\n    }\n    select_tool(tool_name:string) {\n        const _this = this;\n        const button = document.getElementsByClassName(tool_name)[0];\n        const button_list = document.getElementsByClassName('button');\n        Array.from(button_list).forEach(other_button => {\n            other_button.classList.remove('pressed')\n        });\n        button.classList.add('pressed')\n        _this.editor.select_tool(tool_name)\n    }\n    load_image(url:string) {\n        const img = new Image();\n        const _this = this\n        img.addEventListener('load', () =>  {\n            // Clear canvas and draw the image\n            _this.art_canvas.width = img.naturalWidth;\n            _this.art_canvas.height = img.naturalHeight;\n            // a = w / h\n            const view_canvas_aspect = _this.view_canvas.clientWidth/_this.view_canvas.clientHeight;\n            const view_port_w = Math.min(img.naturalWidth,img.naturalHeight*view_canvas_aspect)/2\n            _this.state.view_port = {'x':0, 'y':0, 'w':view_port_w,\n            'h':  view_port_w / view_canvas_aspect};\n            _this.art_context.clearRect(0, 0, _this.art_canvas.width, _this.art_canvas.height);\n            _this.art_context.drawImage(img, 0, 0, _this.art_canvas.width, _this.art_canvas.height);\n            _this.editor.art_to_view()\n            _this.editor.art_to_staging()\n        });\n        img.src = url;\n    }\n    init_load_save() {\n        const art_canvas = this.art_canvas;\n        const art_context = this.art_context\n        const view_context = this.view_context\n        const staging_context = this.staging_context\n        click_for_a_second('save_button',() => {\n            // Generate a PNG from the canvas\n            art_canvas.toBlob(function(blob) {\n                if (!blob)  {\n                    alert('invalid choice, not saving')\n                    return\n                }\n\n                const link = document.createElement('a');\n                link.href = URL.createObjectURL(blob);\n                link.download = 'image.png';  // Set the file name for download\n                link.click();\n            }, 'image/png');\n        });\n        const file_input = document.getElementById('file_input')! as HTMLInputElement\n        file_input.addEventListener('change', (event:Event) =>{\n            const input = event.target as HTMLInputElement;\n\n            if (input\n                && input.files\n                && input.files.length > 0\n                && input.files[0]\n                && input.files[0].type === 'image/png') {\n                const file = input.files[0];\n                const reader = new FileReader();\n                const _this = this;\n                reader.onload = function(e) {\n                    if (e.target) {\n                        _this.load_image(e.target.result as string)                        \n                    }\n                };\n                reader.readAsDataURL(file);\n            } else {\n                alert(\"Please select a valid PNG file.\");\n            }\n            file_input.value = '';\n        });\n        document.getElementById('load_button')!.addEventListener('click',() => {\n            file_input.click()\n        });\n        document.getElementById('gdrive_button')!.addEventListener('click',() => {\n            this.google_drive.open_picker(this.load_image.bind(this));//(s:string) => {console.log(s)});\n        });\n    }\n    init_undo_redo_buttons() {\n        const _this = this;\n        click_for_a_second('undo_button',() => {\n                _this.editor.undo()\n            }\n        )\n        click_for_a_second('redo_button',() => {\n            _this.editor.redo()\n        }\n    )\n    }\n    init_buttons() {\n        const _this = this;\n        const button_list = document.getElementsByClassName('button');\n        Array.from(button_list).forEach(button => {\n            const button_class_list = button.classList;\n            if (button_class_list[0] != 'button') {\n                button.addEventListener('click', event => {\n                    _this.select_tool(button_class_list[0])\n                })\n            }\n        })\n        this.init_undo_redo_buttons()\n        this.init_load_save()\n    }\n    forward_events_to_editor() {\n        // canvas\n        const fore = document.getElementById('fore')!!!;\n        const canvas_area = document.getElementById('view-canvas')!!;\n        [\"pointerdown\", \"pointerup\",\"pointerout\", \"pointerleave\", \"pointermove\", \"click\", \"keydown\"].forEach((ename) =>\n        {\n            canvas_area.addEventListener(ename, (ev) => {\n                ev.preventDefault()\n                if (this.editor[ename as keyof Editor]) {\n                    (this.editor[ename as keyof Editor]  as Function)(ev);\n                }\n            })\n        }\n        )\n        this.view_canvas.addEventListener('contextmenu', (event) => {\n            event.preventDefault();\n        });\n\n        // body\n        document.body.addEventListener(\"keydown\", (ev) =>\n            this.editor.keydown(ev))\n    }\n\n    init_color_selector() {\n        let img = new Image();\n        img.src = \"/palette.png\";\n        this.palette_hl_canvas.width = this.palette_hl_canvas.offsetWidth;\n        this.palette_hl_canvas.height = this.palette_hl_canvas.offsetHeight;\n        this.palette_sat_canvas.width = this.palette_sat_canvas.offsetWidth;\n        this.palette_sat_canvas.height = this.palette_sat_canvas.offsetHeight;\n        this.palette.plot()\n \n        const _this = this;\n        const palette = this.palette;\n        const hl_callback = (event:MouseEvent) => {\n            if (event.buttons == 0) {\n                return\n            }\n            event.preventDefault()\n            palette.hl_click(event.offsetX, event.offsetY);\n            const rgb_color = palette.get_rgb_color();\n            _this.color_stack.select_color(rgb_color, !!(event.buttons & 1), true);\n        }\n        this.palette_hl_canvas.addEventListener('pointermove', hl_callback)\n        this.palette_hl_canvas.addEventListener('pointerup', hl_callback)\n        this.palette_hl_canvas.addEventListener('pointerdown', hl_callback)\n        this.palette_hl_canvas.addEventListener('click', hl_callback)\n        const sat_callback = (event:MouseEvent) => {\n            if (event.buttons == 0) {\n                return\n            }\n            event.preventDefault()\n            palette.sat_click(event.offsetX, event.offsetY);\n            const rgb_color = palette.get_rgb_color();\n            _this.color_stack.select_color(rgb_color, !!(event.buttons & 1), true);\n        }\n        this.palette_sat_canvas.addEventListener('pointermove', sat_callback)\n        this.palette_sat_canvas.addEventListener('pointerdown', sat_callback)\n        this.palette_sat_canvas.addEventListener('pointerup', sat_callback)\n        this.palette_sat_canvas.addEventListener('click', sat_callback)\n\n        this.palette_sat_canvas.onpointermove = sat_callback\n        this.palette_sat_canvas.onpointerup = sat_callback\n        this.palette_hl_canvas.addEventListener('contextmenu', (event:MouseEvent) => {\n            event.preventDefault();\n        });\n        this.palette_sat_canvas.addEventListener('contextmenu', (event:MouseEvent) => {\n            event.preventDefault();\n        });\n        document.getElementById('color-selector-div-back')!!.addEventListener('click', () => {\n            const tmp_back = _this.settings.back_color;\n            _this.settings.back_color = _this.settings.fore_color;\n            _this.settings.fore_color = tmp_back;\n            document.getElementById('color-selector-div-fore')!.style.backgroundColor = _this.settings.fore_color\n            document.getElementById('color-selector-div-back')!.style.backgroundColor = _this.settings.back_color\n        })\n    }\n    clear_context(context:CanvasRenderingContext2D) {\n        context.fillStyle = \"rgba(255,255,255,255)\"\n        context.fillRect(0,0,this.view_canvas.width,this.view_canvas.height);\n        context.fill();\n    }\n    clear_art_canvas() {\n        this.clear_context(this.art_context)\n    }\n    init_view_canvas_size() {\n        const resizeObserver = new ResizeObserver(entries => {\n            entries.forEach(entry => {\n                // asserting entry == view-canvas\n                const view_canvas = entry.target as HTMLCanvasElement;\n                view_canvas.width = entry.contentRect.width;\n                view_canvas.height = entry.contentRect.height;\n            })\n        })\n        document.querySelectorAll('#canvas-area canvas')!.forEach((e:Element) => {\n        resizeObserver.observe(e);\n        })\n\n    }\n    init_scroll() {\n        this.view_canvas.addEventListener('wheel', (event) => {\n            event.preventDefault()\n            // Get the modifiers pressed\n            const ctrl_key = event.ctrlKey;\n          \n            // Access scroll properties\n            const deltaX = event.deltaX; // Horizontal scroll\n            const deltaY = event.deltaY; // Vertical scroll\n          \n          \n            // Perform actions based on modifiers and scroll direction\n            if (ctrl_key) {\n                // Zoom:;\n                // view_port.h, w changes\n                // cursor in before and in after change has to be contant\n                const art_x_before_zoom = this.state.view_port.x + event.offsetX  / \n                this.view_canvas.clientWidth * this.state.view_port.w;\n                /* equations:\n                // view_port_x_before + cursor_x*view_port_w_before / view_canvas_w = \n                // view_port_x_after + cursor_x*view_port_w_after  / view_canvas_w\n                // view_port_y_before + cursor_x*view_port_h_before / view_canvas_h = \n                // view_port_y_after + cursor_x*view_port_h_after  / view_canvas_h\n                // thus:\n                // view_port_y_after = view_port_y_before + cursor_y*(view_port_h_before-view_port_h_after) / view_canvas_h\n                // view_port_x_after = view_port_x_before + cursor_x*(view_port_w_before-view_port_w_after) / view_canvas_w\n                // view_port_y_after = view_port_y_before + cursor_y*deltaY/ view_canvas_h\n                // view_port_x_after = view_port_y_after*aspect;\n                */\n\n                const aspect = this.state.view_port.w / this.state.view_port.h;\n                const ratio_h = Math.exp(deltaY/1000);\n                const delta_h = this.state.view_port.h*(ratio_h-1)\n                this.state.view_port.y = this.state.view_port.y - event.offsetY * delta_h/ this.view_canvas.clientHeight;\n                this.state.view_port.x = this.state.view_port.x - event.offsetX * delta_h*aspect/ this.view_canvas.clientWidth;\n                this.state.view_port.h = Math.max(1, this.state.view_port.h*ratio_h)\n                this.state.view_port.w = this.state.view_port.h*aspect;\n            } else {\n                this.state.view_port.y = Math.max(0, this.state.view_port.y+deltaY/ this.view_canvas.clientHeight*100)\n                this.state.view_port.x = Math.max(0, this.state.view_port.x+deltaX/ this.view_canvas.clientWidth*100)\n            }\n            this.editor.art_to_view();\n            const _this = this;\n            this.editor.art_to_staging()\n\n\n            \n        });\n    }\n    init() {\n        // clear\n        this.view_context.fillStyle = \"rgba(255,255,255,0)\"\n        this.view_context.fillRect(0,0,this.view_canvas.width,this.view_canvas.height);\n        this.staging_context.fillStyle = \"rgba(255,255,255,0)\"\n        this.staging_context.fillRect(0,0,this.staging_canvas.width,this.staging_canvas.height)\n        this.clear_art_canvas();\n        // forward pointer\n        // bind pointer\n        const _this = this;\n        this.init_color_selector();\n        this.init_buttons();    \n        this.forward_events_to_editor();\n        this.select_tool('scribble');\n        this.init_view_canvas_size();\n        this.init_scroll();\n    }\n}\nexport function app_ignite() {\n    (window as any).app = new MainApp();\n    (window as any).app.init();\n}\n\nwindow.addEventListener('load', app_ignite);\n\n"],"names":[],"sourceRoot":""}